#!/usr/bin/env bash
# Configures Nginx to redirect /redirect_me to another page

sudo apt-get update -y -qq
sudo apt-get install nginx -y

# Backing up the default Nginx configuration file
sudo cp /etc/nginx/sites-available/default /etc/nginx/sites-available/default.backup

# Adding the redirection configuration to the Nginx default server block
sudo sed -i '/^server {/a \
    location = /redirect_me { \
        return 301 https://www.youtube.com/watch?v=QH2-TGUlwu4; \
    }' /etc/nginx/sites-available/default

# Testing the Nginx configuration for syntax errors
sudo nginx -t

sudo systemctl reload nginx

echo -e "\nNginx has been configured to redirect /redirect_me to https://www.youtube.com/watch?v=QH2-TGUlwu4 with a 301 Moved Permanently status.\n"